{%- comment -%}
  Layout: group_members
  Groups the list in page.profiles by the front-matter key `category`
  and prints that category as a heading before the corresponding cards.
{%- endcomment -%}

<div class="container">
  {%- assign groups = page.profiles | group_by: "category" -%}

  {%- for section in groups -%}
    {%- if section.name != "" and section.name != nil -%}
      <h2 class="mt-5">{{ section.name }}</h2>
    {%- endif -%}

    {%- for p in section.items -%}
      {%- comment -%}
        The stock include lives in _includes/profile.liquid
        (extension is .html, not .liquid).
      {%- endcomment -%}
      {% include profile.liquid
        align          = p.align
        image          = p.image
        content        = p.content
        image_circular = p.image_circular
        more_info      = p.more_info
      %}
    {%- endfor -%}
  {%- endfor -%}
</div>